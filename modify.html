<!DOCTYPE html>

<head>
  <meta http-equiv="" Content-Type" content=" = " text/html; charset="utf-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="format-detection" content="telephone=no, email=no" />
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="HandheldFriendly" content="true">
  <meta name="MobileOptimized" content="320">
  <meta name="x5-orientation" content="portrait">
  <meta name="x5-fullscreen" content="true">
  <meta name="browsermode" content="application">
  <meta name="x5-page-mode" content="app">
  <meta name="msapplication-tap-highlight" content="no">
  <link rel="stylesheet" href="./css/index.css" type="text/css" />
  <link rel="stylesheet" href="./css/modify.css" type="text/css" />
  <title>Modify Task</title>
  <script src="js/audio.js"></script>

</head>

<body>
  <audio id="audio">
    <source src="sound.mp3" type="audio/mpeg">
  </audio>
  <header class="flex-sb">
    <p id="logo">E</p>
    <nav id="nav-bar" class="nav-link">
      <a href="index.html" class="nav-link">Easytask</a> |
      <a href="list.html" class="nav-link">Task-list</a> |
      <a href="login.html" class="nav-link">Login</a>
    </nav>

  </header>

  <div class="timer">
    <img id="lb" class="lb" src="img/lb1.png">
    <div>
      <a href="timer.html"><img src="icon/timer.png" width="50" /></a>
      <a href="note.html"><img src="icon/note.png" width="50" /></a>
    </div>
  </div>

  <div class="home">
      <div class="title">
          What you need 
      </div>
      <div class="age">
        <span> Age：</span> <input type="text" id="ageVal">
      </div>
      <div class="concerns" id="concerns1">
        <div class="title">Concerns：</div>
        <div class="text">
            <a>grammar</a>
            <a>logic</a>
            <a>words</a>
            <a>writing</a>
        </div>
      </div>
      <div class="concerns" id="concerns2">
        <div class="title">Phrase：</div>
        <div class="text">
            <a>English</a>
            <a>Chinese</a>
            <a>French</a>
            <a>...</a>
        </div>
      </div>
      <div class="submit"><button onclick="submit()">complete</button></div>
  </div>

  <div class="home2">
     <div class="title1">Suit your choice</div>
     <div class="textUrl">

     </div>
     <div class="submit"><button onclick="submit2()">reelect</button></div>
  </div>
</body>
</html>


<script>
    let arr1 = [
      "https://www.baidu.com",
      "https://www.google.cn",
      "https://www.microsoftstore.com.cn",
      "https://www.microsoftstore.com.cn"
    ] 

    function render() {
      document.querySelector('.textUrl').innerHTML = "";
      let concernsobj = localStorage.getItem('concerns')?JSON.parse(localStorage.getItem('concerns')):[];
      if (concernsobj.concerns == "grammar"){
        document.querySelector('.textUrl').innerHTML = `<div class="text1">${arr1[0]}</div>`
      }else if (concernsobj.concerns == "words") {
        document.querySelector('.textUrl').innerHTML = `<div class="text1">${arr1[1]}</div>`
      }else if (concernsobj.concerns == "logic") {
        document.querySelector('.textUrl').innerHTML = `<div class="text1">${arr1[2]}</div>`
      }else if (concernsobj.concerns == "writing") {
        document.querySelector('.textUrl').innerHTML = `<div class="text1">${arr1[3]}</div>`
      }
      
    }

    let concernsObj = localStorage.getItem('concerns');
    let concerns = '';
    let concerns2 = '';

    if (concernsObj) {
      document.querySelector('.home').style.display = "none";
      document.querySelector('.home2').style.display = "block";
    }else {
      document.querySelector('.home').style.display = "block";
      document.querySelector('.home2').style.display = "none";
    }

    function submit(){
      let ageVal = document.getElementById('ageVal').value;
      localStorage.setItem('concerns',JSON.stringify({
        concerns,concerns2,ageVal
      }))
      document.querySelector('.home').style.display = "none";
      document.querySelector('.home2').style.display = "block";
      alert('submit is ok!');
      render();
    }
    
    document.querySelectorAll('.home #concerns1 .text a').forEach(dom => {
      dom.onclick = function(event) {
        document.querySelectorAll('.home #concerns1 .text a').forEach(one => {
          one.style.background = "rgba(75, 81, 95, 0.3)";
        })
        event.target.style.background = "red";
        concerns = event.target.textContent;
      }
    })

    document.querySelectorAll('.home #concerns2 .text a').forEach(dom => {
      dom.onclick = function(event) {
        document.querySelectorAll('.home #concerns2 .text a').forEach(one => {
          one.style.background = "rgba(75, 81, 95, 0.3)";
        })
        event.target.style.background = "red";
        let concerns2 = event.target.textContent;
      }
    })

    function submit2(){
      localStorage.removeItem('concerns');
      document.querySelector('.home').style.display = "block";
      document.querySelector('.home2').style.display = "none";
    }


</script>